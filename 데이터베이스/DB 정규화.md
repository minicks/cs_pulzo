<div align="center">
    <h1>
        DB 정규화
    </h1>
</div>



<h2>
    목차
</h2>

1. [정규화란?](#1)
2. [1NF(제1정규형)](#2)
3. [2NF(제2정규형)](#3)
4. [3NF(제3정규형)](#4)
5. [BCNF(Boyce-Codd 정규형)](#5)
6. [4NF(제4정규형)](#6)
7. [5NF(제5정규형, PJ/NF)](#7)
8. [정리](#8)
9. [반정규화(De-normalization)](#9)
10. [참고](#10)



<div id=1>
    <h2>
        1. 정규화란?
    </h2>
</div>

### 의미

함수적 종속성 등의 종속성 이론을 이용하여 잘못 설계된 관계형 스키마를 더 작은 속성의 세트로 쪼개어 바람직한 스키마로 만들어가는 과정
즉, 하나의 종속성이 하나의 릴레이션에 표현 될 수 있도록 분해해가는 과정.
(위키) 관계형 데이터베이스의 설계에서 <u>중복을 최소화</u>하게 데이터를 구조화하는 프로세스



### 목적

데이터 구조의 안정성을 최대화.
어떠한 릴레이션이라도 데이터베이스 내에서 표현 가능하게 만듦.
효과적인 검색 알고리즘을 생성.
<u>중복을 배제하여 삽입, 삭제, 갱신 이상의 발생을 방지.</u>
데이터 삽입 시 릴레이션을 재구성할 필요성을 줄임.



### 원칙

정보의 무손실 표현, 즉 하나의 스키마를 다른 스키마로 변환할 때 정보의 손실이 있어서는 안 됨.
분리의 원칙, 즉 하나의 독립된 관계성은 하나의 독립된 릴레이션으로 분리시켜 표현해야함.
데이터의 중복성이 감소돼야함.



<div id=2>
    <h2>
        2.1NF(제1정규형)
    </h2>
</div>

릴레이션에 속한 모든 **도메인이 원자값**만으로 되어 있는 릴레이션. (도메인이 원자값)

1. 어떤 Relation에 속한 모든 Domain이 원자값(atomic value)만으로 되어 있다.
2. 모든 attribute에 반복되는 그룹(repeating group)이 나타나지 않는다.
3. 기본 키를 사용하여 관련 데이터의 각 집합을 고유하게 식별할 수 있어야 한다.

정확히는 이 세 조건을  만족하는 것.



<div id=3>
    <h2>
        3.2NF(제2정규형)
    </h2>
</div>

릴레이션 R이 1NF이고, 키가 아닌 모든 속성이 **기본키에 대하여 완전 함수적 종속 관계**를 만족.
(부분적 함수 종속을 제거하는 것 => 완전 함수적 종속)

- **함수적 종속** : X의 값에 따라 Y값이 결정될 때 X -> Y로 표현하는데, 이를 Y는 X에 대해 함수적 종속 이라고 합니다. 예를 들어 학번을 알면 이름을 알 수 있는데, 이 경우엔 학번이 X가 되고 이름이 Y가 됩니다. X를 결정자라고 하고, Y는 종속자라고 합니다 다른 말로 X가 바뀌었을 경우 Y가 바뀌어야만 한다는 것을 의미합니다.
- 함수적 종속에서 X의 값이 여러 요소일 경우, 즉, {X1, X2} -> Y일 경우, X1와 X2가 Y의 값을 결정할 때 이를 **완전 함수적 종속** 이라고 하고, X1, X2 중 하나만 Y의 값을 결정할 때 이를 **부분 함수적 종속** 이라고 합니다.



<div id=4>
    <h2>
        4.3NF(제3정규형)
    </h2>
</div>

릴레이션 R이 2NF이고, 키가 아닌 모든 애트리뷰트가 **기본키에 대해 이행적 종속 관계를 이루지 않도록 제한**한 관계형.

이행적 종속 관계 : A => B 이고, B => C 일 때, A => C 를 만족하는 관계



<div id=5>
    <h2>
        5.BCNF(Boyce-Codd 정규형)
    </h2>
</div>

릴레이션 R에서 **결정자가 모두 후보키**인 관계형.

3NF에서 후보키가 많고 서로 중첩되는 경우에 적용하는, **강한 제3정규형**이라고도 함.
모든 BCNF가 종속성을 보존하는 것은 아님.

BCNF의 제약 조건

- 키가 아닌 모든 속성은 **각 키에 대하여 완전 종속**해야 함.
- 키가 아닌 모든 속성은 **그 자신이 부분적으로 들어가 있지 않은 모든 키에 대하여 완전 종속**해야 함.
- 어떤 속성도 **키가 아닌 속성에 대해서는 완전 종속할 수 없음**.



<div id=6>
    <h2>
        6.4NF(제4정규형)
    </h2>
</div>

릴레이션 R에 A=>=> B 가 성립하는 경우 R의 모든 속성이 A에 함수적 종속.

**다치 종속(MVD; Multi Valued Dependency)**
A, B, C 세 개의 속성을 가진 릴레이션 R에서 어떤 복합 속성(A, C)에 대응하는 B 값의 집합이 A 값에만 종속되고 C 값에는 무관할 때 다치 종속 R · A =>=> R · B가 존재.



<div id=7>
    <h2>
        7.5NF(제5정규형, PJ/NF)
    </h2>
</div>

릴레이션 R의 모든 조인 종속성(JD)의 만족이 R의 후보키를 통해서만 만족될 때.

**조인 종속(JD; Join Dependency)**
어떤 릴레이션 R이 자신의 Projection(X, Y, ... , Z)에 대한 조인의 결과가 자신과 같을 때 조인 종속(JD)은 R의 속성 집합의 부분집합.



<div id=8>
    <h2>
        8. 정리
    </h2>
</div>

![img](https://velog.velcdn.com/images%2Fbsjp400%2Fpost%2F140f510e-26ed-4807-a517-bc0b9a902c69%2Fimage.png)



### 단점

릴레이션 분해로 인해 릴레이션 간의 연산(Join)이 많아져서 질의에 대한 응답시간이 길어질 수 있음.

이러한 대응책으로 반정규화가 있다.





<div id=9>
    <h2>
        9. 반정규화(De-normalization)
    </h2>
</div>

반정규화는 정규화된 엔티티, 속성, 관계를 시스템의 성능 향상 및 개발과 운영의 단순화를 위해 중복 통합, 분리 등을 수행하는 데이터 모델링 기법 중 하나.



언제 사용하는 가?

- 디스크 I/O 량이 많아서 조회 시 성능이 저하될 때
- 테이블끼리의 경로가 너무 멀어 조인으로 인한 성능 저하가 예상될 때
- 칼럼을 계산하여 조회할 때 성능이 저하될 것이 예상될 때

일반적으로 조회에 대한 처리 성능이 중요하다고 판단될 때 부분적으로 반정규화 실행



<div id=10>
    <h2>
        10.참고
    </h2>
</div>

[예시 및 설명](https://itwiki.kr/w/%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4_%EC%A0%95%EA%B7%9C%ED%99%94)

[상세 예시](https://velog.io/@bsjp400/Database-DB-%EC%A0%95%EA%B7%9C%ED%99%94-%EB%B9%84%EC%A0%95%EA%B7%9C%ED%99%94%EB%9E%80)

[예시](https://mangkyu.tistory.com/110)

[1~BCNF](https://3months.tistory.com/193)