## 목차
- [목차](#목차)
- [해시(Hash)](#해시hash)
- [해싱 구현 기법](#해싱-구현-기법)
    - [정적 해싱(Static Hashing)](#정적-해싱static-hashing)
      - [오버플로(Overflow)](#오버플로overflow)
    - [동적 해싱(Dynamic Hashing)](#동적-해싱dynamic-hashing)
    - [확장 해싱(Extendible Hasing)](#확장-해싱extendible-hasing)
- [보안에서의 해싱](#보안에서의-해싱)
- [해시 알고리즘](#해시-알고리즘)
    - [MD(Message Digest)](#mdmessage-digest)
    - [SHA(Secure Hash Algorithm)](#shasecure-hash-algorithm)
    - [CRC(Cyclic Redundancy Check)](#crccyclic-redundancy-check)
    - [Keccak](#keccak)
- [참조](#참조)

## 해시(Hash)
- 해싱, 해시 함수, 해시 알고리즘 등으로 불리고, 임의의 길이의 데이터를 고정된 길이의 데이터로 매핑하는 함수
- 매핑에 의해 얻어진 값은 해시 값, 해시 코드 등으로 불리고 간단하게 해시라고 부름
![](https://upload.wikimedia.org/wikipedia/commons/thumb/5/58/Hash_table_4_1_1_0_0_1_0_LL.svg/1280px-Hash_table_4_1_1_0_0_1_0_LL.svg.png)
- 중복 레코드를 찾는 데이터베이스 검색이나 암호학 등에서 사용
    - 해시 알고리즘을 해싱과 암호화 모두 사용하지만, 방식은 다름
- 이상적인 경우, 모든 키에 대하여 다른 해시가 매칭되어 시간 복잡도 O(1)이 되지만, 각 해시 공간의 크기 등의 제약 때문에 실제로는 시간 복잡도가 더 높을 수 있음
- 충돌이 거의 나지 않고, 원본 내용을 알 수 없다.

## 해싱 구현 기법

|bucket \ slot|0|1|2|
|:-:|:-:|:-:|:-:|
|0|data|data||
|1|data|data|data|
|2|data|||
|...||||
|10|data|data||

- 버킷과 슬롯으로 구성
    - 버킷 : 해시 테이블의 행 인데스
    - 슬롯 : 행의 열 인덱스

#### 정적 해싱(Static Hashing)

- 고정 크기의 배열을 이용한 방법
- 파일 구조가 커짐에 따라 주기적으로 해싱 구조를 재구성
- 구현이 쉽고 간단
- 데이터 증가에 따라 검색성능이 감소
- 버킷을 너무 작게 잡을 경우 충돌의 우려, 너무 크게 잡을 경우 메모리의 낭비 우려 있음

<br>

- Division : 나머지를 이용하여 버킷 주소를 계산
    - 버킷 주소(인덱스) = 키 값 % 전체 버킷 크기
    - 일반적으로 버킷 크기를 소수로 하여 성능 향상

- Mid-Square : 키 값을 제곱한 후 결과 값의 중간 부분에 있는 몇 비트만 선택하여 사용
    - 키를 구성하는 값의 일부가 같더라도, 결과값이 달라지도록 할 수 있음
    - 전체 버킷의 크기는 선택하는 자릿수 n에 대하여 $10^n$이 됨
    - 10 → **10**0 → 10, 8 → **64** → 64, 43 * 43 → 1**84**9 → 84

- Folding : 키의 마지막 부분을 제외하고 동일한 여러 부분으로 나누어, 각 값을 더하거나, XOR 연산 등을 통하여 인덱스로 이용
    - 시프트 폴딩 : 경계에 따라 순서대로 더하는 방법
        - 12345678910 → 123 + 456 + 789 + 10 = 1378
    - 경계 폴딩 : 경계마다 뒤집어 가며 더하는 방법
        - 12346578910 → 123 + 654 + 789 + 01 = 1567

- Digit-Analysis : 키를 구성하는 수들이 모든 키들 내에서 각 자리별로 어떤 분포인지 조사, 비교적 고른 분포를 나타내는 자릿 수를 필요한 만큼 선택하여 사용
    - 이미 알려진 정적 파일에 유용, 삽입, 삭제가 빈번한경우 비효율적

|Key|bucket|
|:-:|:----:|
|01**123**10|123|
|01**358**11|358|
|01**985**10|985|
|21**220**10|220|

- Radix-Exchange : 한 진법을 기준으로 키를 변환하여, 주소를 얻는 방법

- Pseudo-Random : 난수를 통하여, 키를 난수와 곱하여 사용

##### 오버플로(Overflow)
어떤 버킷의 슬롯이 모두 사용되었을 때, 해당 버킷에 데이터를 넣을 수 없는 상황

- 오버플로 핸들링 : 오버플로를 해결하는 방법으로, 개방 주소법, 체이닝 방식
- 개방 주소(Open Address) : 공간이 남는 버킷에 집어 넣는 방식
    - 고정된 폭을 정하고, 그 폭만큼 버킷의 주소를 이동해서 남는 공간이 있다면 추가
- 체이닝(Chaining) : 각 버킷이 연결 리스트로 구성하여 원소를 추가하는 방법

#### 동적 해싱(Dynamic Hashing)
- 데이터 증감에 따라 배열의 크기를 동적으로 변화
    - 버킷의 수를 고정하지 않고 필요에 따라 늘리거나 줄임
    - 버킷의 수를 늘리는 과정에 시간이 많이 필요할 수 있음
- 로직이 복잡
- 데이터가 증가해도 검색 성능이 유지되고, 메모리 낭비를 줄일 수 있음
- 디렉터리(Directory)는 각 버킷에 대응하는 비트 열 형태를 구분할 수 있도록 이진 트리 형태로 구성
- 특정 키를 검색할 때, 해시된 키를 기준, 디렉터리를 검색하여 얻음

#### 확장 해싱(Extendible Hasing)
- 동적 해싱 기법에서 트리의 깊이가 2인 특별한 경우
- 사용할 수 있는 모든 비트열을 사용하지 않고, 일부 비트열만 사용한 후, 더 많은 버킷이 필요하면 비트열을 하나씩 추가
- 장점
파일의 크키가 크더라도, 레코드를 접근하기 위한 디스크 접근이 두 번을 넘기지 않음
버킷 주소 테이블이 작아 저장공간 절약
- 단점
버킷 주소 테이블을 생성해야하는 부담
데이터의 숫자가 적으면 오히려 디스크의 낭비 발생

## 보안에서의 해싱
- 보안 분야에서 데이터 무결성, 메시지 인증 등의 이유로 많이 사용
- 고정되지 않은 임의의 문자열을 고정된 길이로 출력

## 해시 알고리즘

#### MD(Message Digest)
- 데이터 무결성의 위해 메세지 압축, 축약을 하는 해쉬 알고리즘
- MD4 : 입력 데이터로부터 128비트 메시지 축약을 만듦으로서 무결성 검증에 사용
- MD5 : MD4의 확장으로, MD4에 비하여 느리지만 보안성이 높음

#### SHA(Secure Hash Algorithm)
- 서로 관련된 암호학적 해시 함수 모임
- MD5의 취약점 개선을 위해 개발
- 최초로 SHA-1을 발표, 메시지를 512 비트 블록 단위로 처리, 160비트 출력 생성
    - SHA함수 중에서 가장 많이 사용되며, TLS, SSL 등 보안 프로토콜 프로그렘에서 사용
- SHA-1의 변형으로 SHA-256, SHA-384, SHA-512, SHA-224를 SHA-2로 발표
    - SHA-256, SHA-384, SHA-512는 각각 128, 192, 256 비트의 출력에 해당
    - SHA-224는 3DES 보안 수준에 맞게 수정한 것
- SHA-1, SHA-2의 대체를 위해 SHA-3 발표
    - 스펀지 구조, 패딩 함수, 블록 순열 등 특징

#### CRC(Cyclic Redundancy Check)
- 데이터 전송할 때 전송된 데이터의 오류가 있는지 확인하기 위한 검사 방식
- 가환환의 나눗셈에 기반

#### Keccak
- SHA-1, SHA-2의 보안성 취약문제를 해결하기 위하여 개발된 암호화 해시 알고리즘
- Keccak-256은 SHA3-256 표준으로 적용


## 참조
- https://ko.wikipedia.org/wiki/%ED%95%B4%EC%8B%9C_%ED%95%A8%EC%88%98
- https://dev-kani.tistory.com/2
- https://baramtalk.com/entry/extendible-hashing
- https://reakwon.tistory.com/128
- https://swingswing.tistory.com/98?category=915912
- http://www.hash.kr/
- https://ko.wikipedia.org/wiki/%EC%88%9C%ED%99%98_%EC%A4%91%EB%B3%B5_%EA%B2%80%EC%82%AC